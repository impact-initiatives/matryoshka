sources:
  - name: klt
    database: dlt_data
    schema: kobo_dev
    tables:
      - name: kobo_submission
        description: Submissions
        columns:
          - name: _id
            description: PK for submissions
            data_tests:
              - unique
              - not_null
          - name: _dlt_load_id
            description: DLT load timestamp
            data_tests:
              - not_null
          - name: asset_uid
            description: FK for kobo asset
            data_tests:
              - not_null
      - name: kobo_asset_for_submissions
        description: Asset stats for submissions
        columns:
          - name: uid
            description: PK for assets
            data_tests:
              - unique
              - not_null
          - name: _dlt_load_id
            description: DLT load timestamp
            data_tests:
              - not_null
          - name: deployment__last_submission_time
            description: Last submission timestamp captured by Kobo (assets with no submissions are excluded from this table)
            data_tests:
              - not_null
      - name: kobo_asset
        description: Central table in Kobotoolbox API. a.k.a. Project / Form
        columns:
          - name: uid
            description: PK for assets
            data_tests:
              - unique
              - not_null
          - name: _dlt_load_id
            description: DLT load timestamp
            data_tests:
              - not_null
          - name: deployment__last_submission_time
            description: Last submission timestamp captured by Kobo (assets without submissions are not ingested)
            data_tests:
              - not_null
      - name: kobo_asset_content
        description: Bridge table for linking questions, choices, external choices and settings
        columns:
          - name: asset_uid
            description: Foreign key to kobo_asset; exactly one row per asset in this table (repeated only in downstream survey nesting)
            data_tests:
              - unique
              - not_null
          - name: _dlt_id
            description: DLT record identifier
          - name: _dlt_load_id
            description: DLT load timestamp
            data_tests:
              - not_null
      - name: kobo_asset_content__survey
        description: Form survey questions (nested table)
        columns:
          - name: _dlt_parent_id
            description: Foreign key to kobo_asset_content._dlt_id
          - name: _xpath
            description: XPath location of question in form structure
          - name: name
            description: Question identifier/name
